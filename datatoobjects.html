<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge;chrome=1">
    <link type="text/css" rel="stylesheet" href="horizon.css"/>

    <title>Data visualisation demo</title>

    <style>
      .mkr {
        fill: #FFF;
        stroke: steelblue;
        cursor: crosshair;
      }

      #mkr {
        cursor: crosshair;
      }

      .mkr span {
        margin-left: -999em;
        position: relative;
      }
    </style>
  </head>
  <body>
    <script src="d3.v2.js"></script>
    <script src="horizon.js"></script>
    <script type="text/javascript">
      if((navigator.userAgent.match(/iPad/i)) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/iPhone/i)) {
        document.write("<button id='back' onclick='history.go(-1);return true;'>back</button>");
      }
    </script>

    <div id="charts"></div>

    <script type="text/javascript">

var DATA = [2, 0, 5, 3, 6, 8, 10, 4, 7, 6, 1, 3, 2, 6, 4, 9, 5, 6, 1];

var charts = d3.select("#charts")

///////////////
var chart1 = charts.append("svg");

chart1.attr("width", "500")
  .attr("height", 80);

chart1.selectAll("rect")
  .data(DATA)
.enter()
  .append("rect")
  .style("cursor", "crosshair")
  .style("title", "this is a popup kinda")
  .style("stroke", "steelblue")
  .style("fill", "white")
  .attr("width", 20)
  .attr("height", function (d) { return d * 5; })
  .attr("y", function (d) { return 50 - (d * 5); })
  .attr("x", function (d, i) { return i*25; });

///////////////
var chart2 = charts.append("svg");

chart2.attr("width", "500")
  .attr("height", 80);

chart2.selectAll("circle")
  .data(DATA)
.enter()
  .append("circle")
  .style("stroke", "steelblue")
  .style("fill", "white")
  .attr("r", function (d) { return d * 2; })
  .attr("cy", 20)
  .attr("cx", function (d, i) { return i*25 + 10; });

///////////////
var chart3 = charts.append("svg");

chart3.attr("width", "500")
  .attr("height", 80);

chart3.selectAll("line")
  .data(DATA)
.enter()
  .append("line")
  .style("stroke", "steelblue")
  .style("fill", "white")
  .attr("x1", function (d, i) { return i*25; })
  .attr("x2", function (d, i) { return i*25 + 25; })
  .attr("y1", function (d, i) { return 50 - d; })
  .attr("y2", function (d, i) { return 50 - d; });


///////////////
var chart4 = charts.append("svg");

chart4.attr("width", "500")
  .attr("height", 80);

var d3line3 = d3.svg.line()
  .x(function (d, i) { return i * 25; })
  .y(function (d, i) { return 30 - (d * 2); })
  .interpolate("linear");

var MARKER_RADIUS = 1.15;
var MARKER_BORDER = 0.25;

chart4.append("svg:defs").selectAll("marker")
    .data(['mkr']) // this should be more like ["positive", "negative", "critical"] and then used as the id.
  .enter().append("svg:marker")
    .attr("id", function (d) { return d; })
    .attr("class", "mkr")
//    .attr("viewBox", "0 0 10 10") //minx, miny, width, height //viewboxes suck
    .attr("refX", MARKER_RADIUS)
    .attr("refY", MARKER_RADIUS)
    .attr("markerWidth", (MARKER_RADIUS + MARKER_BORDER) * 2) // must be bigger than what is being rendered
    .attr("markerHeight", (MARKER_RADIUS + MARKER_BORDER) * 2)
    .attr("orient", "auto")
  .append("svg:circle")
    .attr("r", MARKER_RADIUS)
    .attr("cx", MARKER_RADIUS)
    .attr("cy", MARKER_RADIUS)
    .attr("stroke-width", MARKER_BORDER);
//  .append("svg:path") // do a triangular marker
//    .attr("d", "M0,-5L10,0L0,5");

chart4.append("svg:path")
  .attr("d", d3line3(DATA))
  .attr("marker-start", function () { return "url(#mkr)"; })
  .attr("marker-mid", function () { return "url(#mkr)"; })
  .attr("marker-end", function () { return "url(#mkr)"; })
//  .attr("marker", function () { return "url(#mkr)"; }) //doesn't work for some reason...
  .style("stroke-width", 4)
  .style("stroke", "steelblue")
  .style("fill", "#3EA847");

///////////////
var chart5 = charts.append("svg");

chart5.attr("width", "500")
  .attr("height", 80);

var d3area5 = d3.svg.area()
  .x(function (d, i) { return i * 25; })
  .y1(function (d, i) { return 30 - (d * 2); })
  .y0((d3.max(DATA) + 1 ) * 2 + 25)
  .interpolate("linear");

//var marker5 = d3.svg.marker();

chart5.append("svg:path")
  .attr("d", d3area5(DATA))
//  .attr("marker-end", "url(#arrowGray)")
//  .attr("marker-mid", "url(#arrowGray)")
//  .attr("marker-start", "url(#arrowGray)")
  .style("stroke-width", 2)
  .style("stroke", "steelblue")
  .style("cursor", "help")
  .style("fill", "#3EA847");



    </script>

  </body>
</html>

