<html>

  <!-- Research is done: on android, 500ms is required to wait for the screen to rotate. This is lame and cludgy, but will be implemented. -->
  <!-- P.S. This is only required for the built-in app. When run in a browser it works just fine. -->

<head>
  <title>Test</title>
  <style type="text/css">
    #left {
      float:left;
      width:180px;
      background-color:#ff0000;
    }
    #right {
      margin-left: 190px;
      background-color:#00FF00;
    }
  </style>
</head>

<body>
  <div>
    <div id="left">left</div>
    <div id="right">right</div>
    Right's Width: <input type="text" id="outputid" />
    <br />
    Delay:
    <input type="number" id="inputid" value="500" />
  </div>
</body>

<script type="text/javascript">
  var supportsOrientationChange = "onorientationchange" in window,
      orientationEvent = supportsOrientationChange ? "orientationchange" : "resize";
  window.addEventListener(orientationEvent, function() {
    setTimeout("redraw()", document.getElementById("inputid").value);
  }, false);

  var redraw = function () {
    console.log(document.getElementById("right").offsetWidth);
    console.log(document.getElementById("left").offsetWidth);
    document.getElementById("outputid").value = document.getElementById("right").offsetWidth;
  };

  redraw();
</script>

</html>

